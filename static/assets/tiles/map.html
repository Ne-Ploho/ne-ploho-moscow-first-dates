<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
    <title>??? ????</title>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=92659bc7-f871-4646-9da3-b90f42da0c4c&lang=ru_RU" type="text/javascript"></script>
    <script type="text/javascript">
        ymaps.ready(function () {
            var options = {
                    tileUrlTemplate: "./%z/tile-%x-%y.png",
                    controls: {
                        typeControl: false,
                        miniMap: false,
                        toolBar: false,
                        scaleLine: false
                    },
                    scrollZoomEnabled: true,
                    center: [0, 0],
                    backgroundMapType: ymaps.MapType.NONE,
                    zoom: 6,
                    isTransparent: true,
                    smoothZooming: false,
                    mapKey: 'my#map',
                    layerKey: "my#layer",
                    mapType: {
                        name: "??? ????",
                        textColor: "#000000"
                    },
                    copyright: "",
                    mapWidth: 6789,
                    mapHeight: 8010
                };

                var Layer = function() {
                  var layer = new ymaps.Layer(options.tileUrlTemplate, {

                  });

                  layer.getZoomRange = function () {
            return ymaps.vow.resolve([6, 10]);
        };

                  return layer;
                }
 
             ymaps.layer.storage.add(options.layerKey, Layer);

            var mapType = new ymaps.MapType(options.mapKey, [options.layerKey]);

            ymaps.mapType.storage.add(options.mapKey, mapType);

            var worldSize = Math.pow(2, 10) * 256

            var bounds = [
              [options.mapHeight / 2 - worldSize, -options.mapWidth / 2],
              [options.mapHeight / 2, worldSize - options.mapWidth / 2]
            ]

            console.log(bounds)

                var map = new ymaps.Map("YMapsID", {
                  center: options.center,
                  zoom: options.zoom,
                  type: options.mapKey,
                  controls: []
                }, {
                  avoidFractionalZoom: false,

            projection: new ymaps.projection.Cartesian(bounds, [false, false]),
            restrictMapArea: [
              [-options.mapHeight / 2, -options.mapWidth / 2],
              [options.mapHeight / 2, options.mapWidth / 2]
            ]

                });

            map.controls.add('zoomControl', {
              
            });

            console.log(map.getZoom())
        })
    </script>
</head>
<body style="margin:0;padding:0">
    <div id="YMapsID" style="width:100vw;height:100vh"></div>
</body>
</html>
